
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>TIE_2D_dataset_denoiser_clean</title><meta name="generator" content="MATLAB 9.14"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2024-09-25"><meta name="DC.source" content="TIE_2D_dataset_denoiser_clean.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#1">Draw circular and triangular targets with random positions inside a circle without overlap</a></li><li><a href="#2">Create a logical image of a circle with specified diameter, center, and image size.</a></li><li><a href="#3">User-defined parameters</a></li><li><a href="#4">Generating the targets</a></li><li><a href="#6">Shape definition</a></li><li><a href="#7">Positioning targets inside the circle and attributing values</a></li><li><a href="#8">Results back to 64x64 images</a></li><li><a href="#10">Binary mask visualization</a></li><li><a href="#11">Resulting targets visualization</a></li></ul></div><h2 id="1">Draw circular and triangular targets with random positions inside a circle without overlap</h2><pre class="codeinput">clear
clc
close <span class="string">all</span>
</pre><h2 id="2">Create a logical image of a circle with specified diameter, center, and image size.</h2><p>Based on <a href="https://matlab.fandom.com/wiki/FAQ#How_do_I_create_a_circle.3F">https://matlab.fandom.com/wiki/FAQ#How_do_I_create_a_circle.3F</a></p><pre class="codeinput"><span class="comment">%Image parameters</span>
imageSizeX = 64; <span class="comment">%works for square images</span>
imageSizeY = 64;
[columnsInImage, rowsInImage] = meshgrid(1:imageSizeX, 1:imageSizeY);
dimension = 2;

<span class="comment">% Circle parameters.</span>
centerX = 32;
centerY = 32;
radius = 32;

<span class="comment">%Calculating circle points</span>
circlePixels = (rowsInImage - centerY).^2 + (columnsInImage - centerX).^2 &lt;= radius.^2;

<span class="comment">%Converting from logical to double and displaying</span>
vq = double(circlePixels);
vq((vq==0)) = NaN; <span class="comment">% We don't want objects outside of the circle</span>
</pre><h2 id="3">User-defined parameters</h2><pre class="codeinput">it = 1; <span class="comment">%number of simulations</span>
samples = zeros(it,imageSizeX,imageSizeY); <span class="comment">%initialize tensor to store the results</span>

<span class="comment">% Next: Do not define both 'number' and 'mask_side' as large numbers</span>
<span class="comment">% The code won't find a solution</span>

<span class="comment">% Choose the number of targets inside the circle</span>
number = randi([26 26],it,1); <span class="comment">%For a fixed number, use [n n] as the first randi argument</span>

<span class="comment">% Choose the size of the mask where the shapes are defined</span>
mask_side = randi([12 18],it,1);
mask_side = mask_side + mod(mask_side,2); <span class="comment">% To force an even value</span>

<span class="comment">% Choose a pixel value to limit the region of the targets</span>
limit = 8; <span class="comment">%must be an even number</span>

<span class="comment">% Target values scale</span>
max_val = 50;
min_val = -50;
delta_val = max_val - min_val;

<span class="comment">%Target vales</span>
max_target_val = 20;
min_target_val = -5;

<span class="comment">%Time Counter</span>
tic
</pre><h2 id="4">Generating the targets</h2><pre class="codeinput"><span class="keyword">for</span> i = 1:it
</pre><h2 id="6">Shape definition</h2><pre class="codeinput">    A = zeros(mask_side(i),mask_side(i),number(i));

    <span class="comment">% Calculate 'i' triangular and circular masks</span>
    [A1] = mask_triangles(A, number(i), dimension, mask_side(i));
    [A2] = mask_circles(A, number(i), dimension, mask_side(i));

    <span class="comment">% Selecting random shapes</span>
    sorteio1 = randi([1 2], number(i), 1); <span class="comment">%if you want just one shape, let randi([n n],...)</span>
    sorteio2 = randi([1 number(i)], number(i), 1);    <span class="comment">%this is necessary to use different shapes</span>

    <span class="keyword">for</span> j = 1:number(i)
        <span class="keyword">if</span> sorteio1(j,1) == 1
            A(:,:,j) = A1(:,:,sorteio2(j,1));
        <span class="keyword">elseif</span> sorteio1(j,1) == 2
            A(:,:,j) = A2(:,:,sorteio2(j,1));
        <span class="keyword">end</span>
    <span class="keyword">end</span>
    clear <span class="string">A1</span>  <span class="string">A2</span>
</pre><h2 id="7">Positioning targets inside the circle and attributing values</h2><pre class="codeinput">  position <span class="comment">%see attached file</span>

    <span class="comment">% figure; imagesc(matrix); colorbar</span>
    <span class="comment">% figure; imagesc(matrix2); colorbar</span>
</pre><pre class="codeoutput">Success
Success
Success
Success
Success after some tries
     3

Success after some tries
     1

Success after some tries
     2

Success after some tries
    12

Success
Success after some tries
   115

Success after some tries
    14

Success after some tries
    26

Failed, target lost
Success after some tries
    71

Success after some tries
    56

Success after some tries
    84

Failed, target lost
Failed, target lost
Failed, target lost
Success after some tries
    43

Success after some tries
    16

Failed, target lost
Success after some tries
    88

Failed, target lost
Failed, target lost
Failed, target lost
</pre><h2 id="8">Results back to 64x64 images</h2><pre class="codeinput"><span class="comment">% Binary mask</span>
matrix_64 = ones(64,64);
matrix_64(limit/2:matrix_side+limit/2-1, limit/2:matrix_side+limit/2-1) = matrix;
<span class="comment">% Resulting targets</span>
matrix_64_val = ones(64,64);
matrix_64_val(limit/2:matrix_side+limit/2-1, limit/2:matrix_side+limit/2-1) = matrix2;

<span class="comment">%Note: It is possible to concatenate the images of each iteration to a</span>
<span class="comment">%tensor</span>

disp(it)
</pre><pre class="codeoutput">     1

</pre><pre class="codeinput"><span class="keyword">end</span>
toc
</pre><pre class="codeoutput">Elapsed time is 8.296840 seconds.
</pre><h2 id="10">Binary mask visualization</h2><pre class="codeinput">final = matrix_64.*vq;
figure;
h = imagesc(final);
set(h, <span class="string">'AlphaData'</span>, ~isnan(final))
set(gca, <span class="string">'YDir'</span>,<span class="string">'normal'</span>)
colorbar
axis <span class="string">equal</span>
</pre><img vspace="5" hspace="5" src="TIE_2D_dataset_denoiser_clean_01.png" alt=""> <h2 id="11">Resulting targets visualization</h2><pre class="codeinput">final2 = matrix_64_val.*vq;
figure;
h = imagesc(final2);
set(h, <span class="string">'AlphaData'</span>, ~isnan(final2))
set(gca, <span class="string">'YDir'</span>,<span class="string">'normal'</span>)
colorbar
axis <span class="string">equal</span>
</pre><img vspace="5" hspace="5" src="TIE_2D_dataset_denoiser_clean_02.png" alt=""> <p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2023a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Draw circular and triangular targets with random positions inside a circle without overlap
clear
clc
close all

%% Create a logical image of a circle with specified diameter, center, and image size.
% Based on https://matlab.fandom.com/wiki/FAQ#How_do_I_create_a_circle.3F

%Image parameters
imageSizeX = 64; %works for square images
imageSizeY = 64;
[columnsInImage, rowsInImage] = meshgrid(1:imageSizeX, 1:imageSizeY);
dimension = 2;

% Circle parameters.
centerX = 32;
centerY = 32;
radius = 32;

%Calculating circle points
circlePixels = (rowsInImage - centerY).^2 + (columnsInImage - centerX).^2 <= radius.^2;

%Converting from logical to double and displaying
vq = double(circlePixels);
vq((vq==0)) = NaN; % We don't want objects outside of the circle

%% User-defined parameters

it = 1; %number of simulations
samples = zeros(it,imageSizeX,imageSizeY); %initialize tensor to store the results

% Next: Do not define both 'number' and 'mask_side' as large numbers
% The code won't find a solution

% Choose the number of targets inside the circle
number = randi([26 26],it,1); %For a fixed number, use [n n] as the first randi argument

% Choose the size of the mask where the shapes are defined
mask_side = randi([12 18],it,1);
mask_side = mask_side + mod(mask_side,2); % To force an even value

% Choose a pixel value to limit the region of the targets
limit = 8; %must be an even number

% Target values scale
max_val = 50;
min_val = -50;
delta_val = max_val - min_val;

%Target vales
max_target_val = 20;
min_target_val = -5;

%Time Counter
tic 

%% Generating the targets
for i = 1:it

    %% Shape definition

    A = zeros(mask_side(i),mask_side(i),number(i));
    
    % Calculate 'i' triangular and circular masks
    [A1] = mask_triangles(A, number(i), dimension, mask_side(i));
    [A2] = mask_circles(A, number(i), dimension, mask_side(i));
  
    % Selecting random shapes
    sorteio1 = randi([1 2], number(i), 1); %if you want just one shape, let randi([n n],...)
    sorteio2 = randi([1 number(i)], number(i), 1);    %this is necessary to use different shapes

    for j = 1:number(i)
        if sorteio1(j,1) == 1
            A(:,:,j) = A1(:,:,sorteio2(j,1));
        elseif sorteio1(j,1) == 2
            A(:,:,j) = A2(:,:,sorteio2(j,1));
        end
    end
    clear A1  A2

    %% Positioning targets inside the circle and attributing values

  position %see attached file

    % figure; imagesc(matrix); colorbar
    % figure; imagesc(matrix2); colorbar

%% Results back to 64x64 images

% Binary mask 
matrix_64 = ones(64,64);
matrix_64(limit/2:matrix_side+limit/2-1, limit/2:matrix_side+limit/2-1) = matrix;
% Resulting targets
matrix_64_val = ones(64,64);
matrix_64_val(limit/2:matrix_side+limit/2-1, limit/2:matrix_side+limit/2-1) = matrix2;

%Note: It is possible to concatenate the images of each iteration to a
%tensor

disp(it)
end
toc


%% Binary mask visualization
final = matrix_64.*vq;
figure;
h = imagesc(final);
set(h, 'AlphaData', ~isnan(final))
set(gca, 'YDir','normal')
colorbar
axis equal

%% Resulting targets visualization
final2 = matrix_64_val.*vq;
figure;
h = imagesc(final2);
set(h, 'AlphaData', ~isnan(final2))
set(gca, 'YDir','normal')
colorbar
axis equal
##### SOURCE END #####
--></body></html>